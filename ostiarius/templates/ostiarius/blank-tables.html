{% load staticfiles %}
<link href="{% static 'ostiarius/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
<link rel="stylesheet" href="{% static 'ostiarius/tables/css/bootstrap-table.css' %}">
<script src="{% static 'ostiarius/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static 'ostiarius/vendor/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'ostiarius/tables/js/bootstrap-table.js' %}"></script>

<div class="container">
    <h1>getData</h1>
    <p>Get the loaded data of table: <code>$table.bootstrapTable('getData');</code></p>
    <table id="table" data-show-refresh="true" data-show-columns="true" data-search="true"></table>
    <script>
        $.getJSON("{% url 'ostiarius:jsonData' %}", function (jsonFromFile) {
            $(document).ready(function () {
                $('#table').bootstrapTable({
                    data: jsonFromFile,
                    columns: [
                        {
                            field: 'asset_no',
                            title: 'Asset Number',
                        },
                        {
                          field: 'S_N',
                          title: 'S/N'
                        },
                        {
                            field: 'item_name',
                            title: 'Item Name',
                        },
                        {
                            field: 'present',
                            title: 'Present',
                            formatter: 'PresentFormatter',
                        },
                        {
                            field: 'map_status',
                            title: 'Map Status',
                            formatter: 'LinkFormatter',
                        },
                        {
                            field: 'maintenance_mode',
                            title: 'Maintenance Status',
                        },
                    ]
                })
            })
        });

        function PresentFormatter(value, row, index) {
            if (value == true) {
                return "<span class='label label-success'>In T1933</span>";
            }
            else {
                return "<span class='label label-danger'>Not in T1933</span>";
            }
        }
        function LinkFormatter(value, row, index) {
            if (value == true) {
                return "<span class='label label-success'>Yes</span>";
            }
            else {
                return "<span class='label label-danger'>No</span>";
            }
        }
    </script>
</div>
